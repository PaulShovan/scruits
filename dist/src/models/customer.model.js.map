{"version":3,"sources":["src/models/customer.model.js"],"names":["CustomerSchema","mongoose","Schema","customer_id","type","String","required","default","shortid","generate","first_name","last_name","email","unique","trim","lowercase","validate","isEmail","address","street","city","state","country","zipcode","loc","coordinates","Array","phone","orders","Types","ObjectId","ref","hired_partners","Number","total_points","total_orders","service_search_radius","member_since","Date","now","profile_photo","role","statics","list","skip","limit","find","sort","createdAt","exec","addToOrderList","id","order_id","update","$push","findByIdAndUpdate","new","then","order","get","findOne","_id","customer","err","APIError","httpStatus","NOT_FOUND","Promise","reject","getById","getOrders","populate","length","a","b","order_schedule_date","getByEmailOrPhone","$or","updatePhoto","photo_url","$set","updateNumOfOrders","findOneAndUpdate","$inc","removeSelectedMembers","selectedCustomerIds","remove","where","in","model"],"mappings":"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","file":"customer.model.js","sourceRoot":"../../../../.."}