{"version":3,"sources":["src/controllers/auth.controller.js"],"names":["global","fetch","require","register","data","role","Promise","resolve","reject","attributeList","dataEmail","Name","Value","email","dataRole","dataUserId","user_id","dataId","_id","attributeEmail","CognitoUserAttribute","attributeRole","attributeUserId","attributeId","push","cognito","userPool","signUp","password","err","result","console","log","user","username","status","confirmRegistration","req","res","next","userData","Username","body","Pool","cognitoUser","CognitoUser","code","json","message","login","authenticationDetails","AuthenticationDetails","Password","authenticateUser","onSuccess","timeNow","Date","token","idToken","jwtToken","refreshToken","getRefreshToken","getToken","payload","tokenValidity","getTime","onFailure","renew","RefreshToken","CognitoRefreshToken","refreshSession","changePassword","newpassword","forgotPassword","confirmPassword","resendConfirmationCode","addDevice","Device","findOneAndUpdate","user_email","device_id","deviceId","platform","upsert","doc","send"],"mappings":"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","file":"auth.controller.js","sourceRoot":"../../../../.."}